{{ 'lp-lotion.css' | asset_url |  stylesheet_tag }}

<section class="lp">
  <header class="lp-header">
    <h1 class="lp-page-title">{{ page.title }}</h1>

    {% if page.content != blank %}
      <div class="lp-page-content rte">
        {{ page.content }}
      </div>
    {% endif %}

    {% if section.settings.text != blank %}
      <p class="lp-subtitle">{{ section.settings.text }}</p>
    {% endif %}
  </header>

  {% assign featured_product = section.settings.product %}
  {% assign featured_collection = section.settings.collection %}

  {% if featured_product != blank %}
    <section class="lp-featured" aria-label="Produto em destaque">
      <a class="lp-featured-media" href="{{ featured_product.url }}">
        {% if featured_product.featured_image %}
          {{ featured_product.featured_image | image_url: width: 900 | image_tag: loading: 'lazy', class: 'lp-img', alt: featured_product.title }}
        {% else %}
          <div class="lp-img lp-img--placeholder" aria-hidden="true"></div>
        {% endif %}
      </a>

      <div class="lp-featured-info">
        <p class="lp-kicker">Destaque</p>

        <h2 class="lp-featured-title">
          <a href="{{ featured_product.url }}">{{ featured_product.title }}</a>
        </h2>

        <p class="lp-price">{{ featured_product.price | money }}</p>

        <div class="lp-actions">
          <a class="lp-btn" href="{{ featured_product.url }}">Ver produto</a>
        </div>
      </div>
    </section>
  {% endif %}

  {% if featured_collection != blank and featured_collection.products_count > 0 %}
    <section class="lp-products" aria-label="Produtos">
      <div class="lp-products-header">
        <h2 class="lp-section-title">{{ featured_collection.title }}</h2>
        <a class="lp-link" href="{{ featured_collection.url }}">Ver coleção</a>
      </div>

      <div class="lp-grid">
        {% for item_product in featured_collection.products %}
          <article class="lp-card">
            <a class="lp-card-media" href="{{ item_product.url }}">
              {% if item_product.featured_image %}
                {{ item_product.featured_image | image_url: width: 600 | image_tag: loading: 'lazy', class: 'lp-img', alt: item_product.title }}
              {% else %}
                <div class="lp-img lp-img--placeholder" aria-hidden="true"></div>
              {% endif %}
            </a>

            <div class="lp-card-body">
              <h3 class="lp-card-title">
                <a href="{{ item_product.url }}">{{ item_product.title }}</a>
              </h3>
              <p class="lp-price">{{ item_product.price | money }}</p>
            </div>
          </article>
        {% endfor %}
      </div>
    </section>
  {% endif %}
</section>

{% schema %}
  {
    "name": "LP Lotion",
    "settings": [
      {
        "type": "text",
        "id": "text",
        "label": "Heading"
      }, {
        "type": "product",
        "id": "product",
        "label": "Produto"
      }, {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "LP Lotion"
      }
    ]
  }
{% endschema %}